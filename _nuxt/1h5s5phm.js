const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CFT0Alv4.js","./f2IaOeLE.js"])))=>i.map(i=>d[i]);
import{U as w,a as b,_ as L,t as r,v as i,V as P,d as m,r as v,W as x,X as j,Y as J,P as C,Z as M,T as k,$,x as h,a0 as u,a1 as p,z as g}from"./f2IaOeLE.js";const T=w("jobs",{state:()=>({jobs:[],allJobs:[],isLoading:!1,error:null,currentPage:1,hasMore:!0,totalJobs:0}),actions:{async fetchJobs(a=1){this.isLoading=!0;const{$api:s}=b();try{const o=await s.get(`jobs?page=${a}`),{items:t,meta:e}=o.data.result;a===1?(this.allJobs=t,this.jobs=t,this.totalJobs=e.total):(this.allJobs.push(...t),this.jobs.push(...t)),this.currentPage=e.page,this.hasMore=this.currentPage*e.pageSize<e.total}catch{this.error="Failed to load jobs"}finally{this.isLoading=!1}},async applyFilters(a,s,o){this.isLoading=!0,this.jobs=[],this.currentPage=1,this.hasMore=!0;const{$api:t}=b();try{for(;this.hasMore;){console.log(`Fetching page ${this.currentPage}`);const e=await t.get(`jobs?page=${this.currentPage}`),{items:l,meta:c}=e.data.result,d=l.filter(n=>{const f=n.position.toLowerCase().includes(a.toLowerCase())||n.company.toLowerCase().includes(a.toLowerCase()),_=n.location.toLowerCase().includes(s.toLowerCase()),y=!o||n.contract==="Part Time";return f&&_&&y});if(console.log(d,"before"),console.log(d),this.currentPage++,this.hasMore=this.currentPage<=Math.ceil(c.total/c.pageSize),!this.hasMore){this.jobs.push(...d);break}}}catch{this.error="Failed to apply filters"}finally{this.isLoading=!1}},resetFilters(){this.jobs=[],this.allJobs=[],this.currentPage=1,this.fetchJobs(this.currentPage)},loadMoreJobs(){this.hasMore&&!this.isLoading&&this.fetchJobs(this.currentPage+1)}}}),F={},S={class:"px-4 rounded-lg bg-white flex items-start space-x-4 w-full h-full relative animate-pulse"};function V(a,s){return r(),i("div",S,s[0]||(s[0]=[P('<div class="h-12 w-12 bg-gray-200 rounded-full absolute top-0 left-16 -mt-6 -ml-6" data-v-bdbb4bd4></div><div class="mt-8" data-v-bdbb4bd4><div class="h-6 bg-gray-200 rounded w-3/4 mb-2" data-v-bdbb4bd4></div><div class="h-4 bg-gray-200 rounded w-1/2 mb-1" data-v-bdbb4bd4></div><div class="h-4 bg-gray-200 rounded w-1/3 mb-1" data-v-bdbb4bd4></div><div class="h-4 bg-gray-200 rounded w-1/4 mb-2" data-v-bdbb4bd4></div><div class="h-4 bg-blue-200 rounded w-1/5" data-v-bdbb4bd4></div></div>',2)]))}const z=L(F,[["render",V],["__scopeId","data-v-bdbb4bd4"]]),N=m({__name:"LazyJobCard",props:{job:{}},setup(a){const o={job:a.job},t=v(x(()=>$(()=>import("./CFT0Alv4.js"),__vite__mapDeps([0,1]),import.meta.url)));return(e,l)=>t.value?(r(),j(M(t.value),J(C({key:0},o)),null,16)):k("",!0)}}),B={class:"flex flex-col justify-between md:h-[60vh] h-[55vh] min-h-[40vh]"},A={class:"overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4 mx-4"},D=m({__name:"JobList",props:{jobs:{}},setup(a){const s=v(!0);return setTimeout(()=>{s.value=!1},2e3),(o,t)=>(r(),i("div",B,[h("div",A,[s.value?(r(),i(u,{key:0},p(10,e=>h("div",{key:e,class:"bg-white rounded shadow-md flex items-center mt-8 h-[170px]"},[g(z,{class:"m-2"})])),64)):(r(!0),i(u,{key:1},p(o.jobs,e=>(r(),i("div",{key:e.id,class:"bg-white rounded shadow-md flex items-center mt-8 h-[170px]"},[g(N,{job:e},null,8,["job"])]))),128))])]))}});export{D as _,T as u};
